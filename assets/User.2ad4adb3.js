var Q=Object.defineProperty;var k=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var w=(o,l,a)=>l in o?Q(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,C=(o,l)=>{for(var a in l||(l={}))X.call(l,a)&&w(o,a,l[a]);if(k)for(var a of k(l))Y.call(l,a)&&w(o,a,l[a]);return o};import{N as v,i as B,a8 as Z,o as _,n as E,p as $,e as n,w as s,d as e,q as c,t as p,b as I,v as ee,F as x,C as te,aa as oe,V as R,_ as le,$ as ae,P as ne,a0 as se,a3 as re,a2 as de}from"./vendor.2e053485.js";/* empty css                  */import{b as f,r as ie,d as me}from"./index.d96deae4.js";/* empty css                     */import{u as ue}from"./use-table-handlers.9ba9aeae.js";const ce=o=>f({url:"sys/user/listPage",method:"get",data:o}),pe=o=>f({url:"sys/user/save",method:"post",data:o}),fe=o=>{const{id:l}=o;return delete o.id,f({url:`sys/user/update/${l}`,method:"post",data:o})},_e=o=>{const{id:l}=o;return delete o.id,f({url:`sys/user/password/${l}`,method:"get",data:o})},he=o=>f({url:"sys/user/delete",method:"post",data:o}),be={class:"main-body"},ge={class:"toolbar"},Be={setup(o){const l=v({name:""}),a=v({id:"",name:"",roleId:""}),{t,tableRef:S,dialogVisible:h,isEdit:b,formLoading:N,formRef:P,doSearch:W,doAdd:q,doEdit:D,doSubmit:H,doRemove:T,doClose:g}=ue(a),F=[{type:"edit",show:r=>r.createdBy!=="system"},{type:"delete",show:r=>r.createdBy!=="system"}],U=B(()=>[{type:"selection",selectable:A},{prop:"id",label:t("thead.ID"),minWidth:50},{prop:"name",label:t("thead.username"),minWidth:120},{prop:"roleName",label:t("thead.group"),minWidth:120},{prop:"createdBy",label:t("thead.createdBy"),minWidth:120},{prop:"ip",label:t("thead.latestIp"),minWidth:100},{prop:"visitTime",label:t("thead.latestVisit"),minWidth:120}]),L=B(()=>({name:[{required:!0,message:t("form.usernameHolder"),trigger:["blur","change"]}],roleId:[{required:!0,message:t("form.roleRequired"),trigger:["blur","change"]}]}));function A(r){return r.createdBy!=="system"}function M(r,i){T(he,r,i)}function O(){H({save:pe,update:fe},r=>{b.value||R.alert(`${t("tips.success")}${t("form.username")}: ${r.data.name},${t("form.password")}: ${r.data.password}`,t("tips.title"),{confirmButtonText:t("action.confirm")})})}function j(){_e(C({},a)).then(r=>{R.alert(`${t("tips.success")}${t("form.username")}: ${r.data.name},${t("form.password")}: ${r.data.password}`,t("tips.title"),{confirmButtonText:t("action.confirm")})})}return(r,i)=>{const y=le,m=ae,u=ne,V=se,z=me,G=de,J=re,K=Z;return _(),E(x,null,[$("div",be,[$("div",ge,[n(V,{inline:!0,model:e(l)},{default:s(()=>[n(m,null,{default:s(()=>[n(y,{modelValue:e(l).name,"onUpdate:modelValue":i[0]||(i[0]=d=>e(l).name=d),placeholder:e(t)("thead.username")},null,8,["modelValue","placeholder"])]),_:1}),n(m,null,{default:s(()=>[n(u,{icon:"search",type:"primary",onClick:e(W)},{default:s(()=>[c(p(e(t)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),n(m,null,{default:s(()=>[n(u,{icon:"plus",type:"primary",onClick:e(q)},{default:s(()=>[c(p(e(t)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),n(z,{ref_key:"tableRef",ref:S,"get-page":e(ce),filters:e(l),columns:e(U),operations:F,onHandleEdit:e(D),onHandleDelete:M},null,8,["get-page","filters","columns","onHandleEdit"])]),n(K,{title:e(b)?e(t)("action.edit"):e(t)("action.add"),modelValue:e(h),"onUpdate:modelValue":i[3]||(i[3]=d=>oe(h)?h.value=d:null),draggable:"",width:"40%","close-on-click-modal":!1,onClose:e(g)},{footer:s(()=>[n(u,{onClick:e(g)},{default:s(()=>[c(p(e(t)("action.cancel")),1)]),_:1},8,["onClick"]),e(b)?(_(),I(u,{key:0,type:"primary",onClick:j},{default:s(()=>[c(p(e(t)("form.resetPassword")),1)]),_:1})):ee("",!0),n(u,{type:"primary",onClick:O,loading:e(N)},{default:s(()=>[c(p(e(t)("action.submit")),1)]),_:1},8,["loading"])]),default:s(()=>[n(V,{ref_key:"formRef",ref:P,model:e(a),"label-width":"80px",rules:e(L),"label-position":"right"},{default:s(()=>[n(m,{label:e(t)("form.username"),prop:"name"},{default:s(()=>[n(y,{modelValue:e(a).name,"onUpdate:modelValue":i[1]||(i[1]=d=>e(a).name=d)},null,8,["modelValue"])]),_:1},8,["label"]),n(m,{label:e(t)("form.group"),prop:"roleId"},{default:s(()=>[n(J,{modelValue:e(a).roleId,"onUpdate:modelValue":i[2]||(i[2]=d=>e(a).roleId=d),placeholder:e(t)("form.choose"),style:{width:"100%"}},{default:s(()=>[(_(!0),E(x,null,te(e(ie),d=>(_(),I(G,{key:d.name,label:d.label,value:d.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{Be as default};
