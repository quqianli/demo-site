var V=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var p=(e,a,t)=>a in e?V(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,f=(e,a)=>{for(var t in a||(a={}))x.call(a,t)&&p(e,t,a[t]);if(h)for(var t of h(a))A.call(a,t)&&p(e,t,a[t]);return e};import{u as B,B as o,g as F}from"./vendor.2e053485.js";function L(e){const{t:a}=B(),t=o(),u=o(!1),n=o(!1),c=o(!1),r=o(),v=f({},e),_=()=>{t.value.reload()},E=()=>{u.value=!0,n.value=!1,r.value&&r.value.clearValidate()},P=s=>{if(!!e){n.value=!0,u.value=!0;for(const l in e)l in s&&(e[l]=s[l])}},R=(s,l,i)=>{s({id:l}).then(()=>{i&&i()})},b=()=>{const s=f({},e);return n.value||delete s.id,s},y=(s,l)=>{!e||!s||r.value.validate(i=>{if(i){c.value=!0;let d;const m=s.getParams?s.getParams():b();n.value?d=s.update(m):d=s.save(m),d.then(S=>{l?l(S):F({message:a("tips.success"),type:"success",showClose:!0}),g(),n.value?t.value.refresh():t.value.reload()}).finally(()=>{c.value=!1})}})},C=()=>{if(!!e)for(const s in v)e[s]=v[s]};function g(){u.value=!1,C()}return{t:a,tableRef:t,dialogVisible:u,isEdit:n,formLoading:c,formRef:r,doSearch:_,doAdd:E,doEdit:P,doSubmit:y,doClose:g,doRemove:R}}export{L as u};
