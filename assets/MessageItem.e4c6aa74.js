import{B as k,u as T,N as V,a6 as q,r as w,x as I,y as F,o as v,n as y,p as s,e as r,w as g,q as h,t as p,d,F as U,C as D,g as x,P as L,R as j,V as G}from"./vendor.2e053485.js";import{b as f}from"./index.d96deae4.js";const H=e=>{const a=e.type;return delete e.type,f({url:`/message/list/${a}`,method:"get",data:e})},J=e=>{const{id:a,type:l}=e;return delete e.id,delete e.type,f({url:`/message/read/${l}/${a}`,method:"post",data:e})},K=e=>{const a=e.type;return delete e.type,f({url:`/message/readAll/${a}`,method:"post",data:e})},O=e=>{const{id:a,type:l}=e;return delete e.id,delete e.type,f({url:`/message/${l}/${a}`,method:"delete",data:e})};const Q={key:0},W={class:"txt-r"},X={class:"events"},Y={class:"label"},Z={class:"content"},ee={class:"summary"},te={class:"date"},se={class:"extra text"},ne={class:"actions"},oe=s("i",{class:"el-icon-edit"},null,-1),ae=s("i",{class:"el-icon-delete"},null,-1),le={class:"flex-center"},ce={key:1},ie={class:"nodata txt-c"},pe={props:{type:String},setup(e){const a=e,l=k([]),{t:n}=T(),c=V({pageNum:1,pageSize:20}),C=k(0),m=q(a,"type"),u=()=>{const{pageNum:o,pageSize:i}=c;H({type:m.value,pageNum:o,pageSize:i}).then(_=>{l.value=_.data.content||[],C.value=_.data.totalSize||0}).catch(()=>{l.value=[]})},z=o=>{J({type:m.value,id:o}).then(()=>{x.success(n("tips.success")),u()})},S=()=>{K({type:m.value}).then(()=>{x.success(n("tips.success")),u()})},N=o=>{G.confirm(n("tips.deleteConfirm"),n("tips.deleteTitle"),{confirmButtonText:n("action.confirm"),cancelButtonText:n("action.cancel"),type:"warning",draggable:!0}).then(()=>{O({type:m.value,id:o}).then(()=>{x.success(n("tips.success")),u()})})};function B(o){c.pageSize=o,c.pageNum=1,u()}function $(o){c.pageNum=o,u()}return u(),(o,i)=>{const _=L,b=w("comment"),E=I,M=F,R=j;return l.value.length?(v(),y("div",Q,[s("div",W,[r(_,{plain:"",type:"primary",onClick:i[0]||(i[0]=t=>S())},{default:g(()=>[h(p(d(n)("action.markedAllRead")),1)]),_:1})]),s("div",X,[(v(!0),y(U,null,D(l.value,(t,P)=>(v(),y("div",{class:"event",key:P},[s("div",Y,[r(M,{"is-dot":!t.isRead},{default:g(()=>[r(E,null,{default:g(()=>[r(b)]),_:1})]),_:2},1032,["is-dot"])]),s("div",Z,[s("div",ee,[h(p(t.title)+" ",1),s("div",te,p(t.date),1)]),s("div",se,p(t.content),1),s("div",ne,[r(_,{type:"text",disabled:t.isRead,class:"action a-read",onClick:A=>z(t.id)},{default:g(()=>[oe,h(" "+p(d(n)("action.markedRead")),1)]),_:2},1032,["disabled","onClick"]),r(_,{type:"text",class:"action a-delete",onClick:A=>N(t.id)},{default:g(()=>[ae,h(" "+p(d(n)("action.delete")),1)]),_:2},1032,["onClick"])])])]))),128))]),s("div",le,[r(R,{currentPage:d(c).pageNum,"onUpdate:currentPage":i[1]||(i[1]=t=>d(c).pageNum=t),"page-size":d(c).pageSize,"onUpdate:page-size":i[2]||(i[2]=t=>d(c).pageSize=t),total:C.value||0,layout:"prev, pager, next",onSizeChange:B,onCurrentChange:$},null,8,["currentPage","page-size","total"])])])):(v(),y("div",ce,[s("div",ie,p(d(n)("nodata")),1)]))}}};export{pe as default};
