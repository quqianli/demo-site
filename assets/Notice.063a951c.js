import{N as y,i as V,ah as I,a8 as O,o as $,n as A,p as E,e as l,w as o,d as e,q as c,t as p,aa as L,F as j,_ as z,$ as G,P as J,a0 as K}from"./vendor.2e053485.js";/* empty css                  *//* empty css                  */import{b as f,d as M}from"./index.d96deae4.js";/* empty css                     */import{u as Q}from"./use-table-handlers.9ba9aeae.js";const X=a=>f({url:"sys/notice/listPage",method:"get",data:a}),Y=a=>f({url:"sys/notice/save",method:"post",data:a}),Z=a=>{const{id:s}=a;return delete a.id,f({url:`sys/notice/update/${s}`,method:"post",data:a})},ee=a=>f({url:"sys/notice/delete",method:"post",data:a}),te={class:"main-body"},le={class:"toolbar"},de={setup(a){const s=y({title:""}),r=y({id:"",title:"",content:"",isPublish:!1}),{t,tableRef:k,dialogVisible:_,isEdit:w,formLoading:C,formRef:v,doSearch:T,doAdd:x,doEdit:R,doSubmit:q,doClose:h,doRemove:B}=Q(r),P=[{type:"edit",disabled:u=>!!u.publishTime},{type:"delete"}],W=V(()=>[{type:"selection"},{prop:"id",label:t("thead.ID"),minWidth:50},{prop:"title",label:t("thead.title"),minWidth:120,showOverflowTooltip:!0},{prop:"content",label:t("thead.content"),minWidth:120,showOverflowTooltip:!0},{prop:"publishTime",label:t("thead.publishTime"),minWidth:120},{prop:"createdTime",label:t("thead.createdTime"),minWidth:120},{prop:"createdBy",label:t("thead.createdBy"),minWidth:120}]),D=V(()=>({title:[{required:!0,message:t("form.titleRequired"),trigger:["blur","change"]},{min:2,max:60,message:t("form.titleError"),trigger:["blur","change"]}],content:[{required:!0,message:t("form.contentRequired"),trigger:["blur","change"]},{min:2,max:300,message:t("form.contentError"),trigger:["blur","change"]}]}));function S(){q({save:Y,update:Z})}function U(u,n){B(ee,u,n)}return(u,n)=>{const b=z,d=G,m=J,g=K,F=M,H=I,N=O;return $(),A(j,null,[E("div",te,[E("div",le,[l(g,{inline:!0,model:e(s)},{default:o(()=>[l(d,null,{default:o(()=>[l(b,{modelValue:e(s).title,"onUpdate:modelValue":n[0]||(n[0]=i=>e(s).title=i),placeholder:e(t)("thead.title")},null,8,["modelValue","placeholder"])]),_:1}),l(d,null,{default:o(()=>[l(m,{icon:"search",type:"primary",onClick:e(T)},{default:o(()=>[c(p(e(t)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(d,null,{default:o(()=>[l(m,{icon:"plus",type:"primary",onClick:e(x)},{default:o(()=>[c(p(e(t)("action.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),l(F,{ref_key:"tableRef",ref:k,"get-page":e(X),filters:e(s),columns:e(W),operations:P,onHandleEdit:e(R),onHandleDelete:U},null,8,["get-page","filters","columns","onHandleEdit"])]),l(N,{title:e(w)?e(t)("action.edit"):e(t)("action.add"),width:"40%",draggable:"",modelValue:e(_),"onUpdate:modelValue":n[4]||(n[4]=i=>L(_)?_.value=i:null),"close-on-click-modal":!1,onClose:e(h)},{footer:o(()=>[l(m,{onClick:e(h)},{default:o(()=>[c(p(e(t)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",loading:e(C),onClick:S},{default:o(()=>[c(p(e(t)("action.submit")),1)]),_:1},8,["loading"])]),default:o(()=>[l(g,{ref_key:"formRef",ref:v,model:e(r),rules:e(D),"label-width":"80px","label-position":"right"},{default:o(()=>[l(d,{label:e(t)("thead.title"),prop:"title"},{default:o(()=>[l(b,{modelValue:e(r).title,"onUpdate:modelValue":n[1]||(n[1]=i=>e(r).title=i)},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e(t)("thead.content"),prop:"content"},{default:o(()=>[l(b,{type:"textarea",modelValue:e(r).content,"onUpdate:modelValue":n[2]||(n[2]=i=>e(r).content=i),"words-limit":300},null,8,["modelValue"])]),_:1},8,["label"]),l(d,{label:e(t)("form.publish")},{default:o(()=>[l(H,{modelValue:e(r).isPublish,"onUpdate:modelValue":n[3]||(n[3]=i=>e(r).isPublish=i)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{de as default};
